{"ast":null,"code":"import _asyncToGenerator from \"/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./home.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./home.page.scss?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { Platform, IonContent } from '@ionic/angular';\nimport { File } from '@awesome-cordova-plugins/file/ngx';\nlet HomePage = class HomePage {\n  constructor(storage, router, platform, file) {\n    this.storage = storage;\n    this.router = router;\n    this.platform = platform;\n    this.file = file;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    this.router.events.subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        // If it is a NavigationEnd event re-initalise the component\n        if (e instanceof NavigationEnd) {\n          _this.list = yield _this.storage.get('notes');\n          console.log(_this.list);\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  ionViewDidEnter() {\n    this.subscription = this.platform.backButton.subscribe(() => {\n      navigator['app'].exitApp();\n    });\n  }\n\n  ionViewWillLeave() {\n    this.subscription.unsubscribe();\n  }\n\n  isEmpty() {\n    return this.list === undefined || this.list === null;\n  }\n\n  trackElement(item) {\n    return item.key;\n  }\n\n  updateItem(item) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let it = _this2.list.find(element => {\n        return element === item;\n      });\n\n      _this2.router.navigate(['/edit-note'], {\n        state: {\n          obj: item\n        }\n      });\n    })();\n  }\n\n  scrollToTop() {\n    this.content.scrollToTop(500);\n  }\n\n  scrollToBottom() {\n    this.content.scrollToBottom(500);\n  }\n\n  turntostr() {\n    this.file.checkDir(this.file.dataDirectory, 'mydir').then(_ => console.log('Directory exists')).catch(err => console.log(\"Directory doesn't exist\"));\n  }\n\n  save() {\n    console.log(this.list);\n    this.stringlist = JSON.stringify(this.list);\n    console.log(this.stringlist);\n    const fileName = new Date().getTime() + '.txt';\n    console.log(fileName);\n    var link = document.createElement('a');\n    link.download = 'data.json';\n    var blob = new Blob([this.stringlist], {\n      type: 'text/plain'\n    });\n    link.href = window.URL.createObjectURL(blob);\n    link.click();\n  }\n\n  load() {\n    this.list = JSON.parse(this.stringlist);\n    console.log(this.list);\n  }\n\n};\n\nHomePage.ctorParameters = () => [{\n  type: Storage\n}, {\n  type: Router\n}, {\n  type: Platform\n}, {\n  type: File\n}];\n\nHomePage.propDecorators = {\n  content: [{\n    type: ViewChild,\n    args: [IonContent]\n  }]\n};\nHomePage = __decorate([Component({\n  selector: 'app-home',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HomePage);\nexport { HomePage };\n\nfunction dispFile(contents) {\n  document.getElementById('contents').innerHTML = contents;\n}\n\nfunction clickElem(elem) {\n  // Thx user1601638 on Stack Overflow (6/6/2018 - https://stackoverflow.com/questions/13405129/javascript-create-and-save-file )\n  var eventMouse = document.createEvent(\"MouseEvents\");\n  eventMouse.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n  elem.dispatchEvent(eventMouse);\n}\n\nfunction openFile(func) {\n  readFile = function (e) {\n    var file = e.target.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function (e) {\n      var contents = e.target.result;\n      fileInput.func(contents);\n      document.body.removeChild(fileInput);\n    };\n\n    reader.readAsText(file);\n  };\n\n  fileInput = document.createElement(\"input\");\n  fileInput.type = 'file';\n  fileInput.style.display = 'none';\n  fileInput.onchange = readFile;\n  fileInput.func = func;\n  document.body.appendChild(fileInput);\n  c;\n}","map":{"version":3,"mappings":"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","names":["Component","ViewChild","Storage","Router","NavigationEnd","Platform","IonContent","File","HomePage","constructor","storage","router","platform","file","ngOnInit","events","subscribe","e","list","get","console","log","ionViewDidEnter","subscription","backButton","navigator","exitApp","ionViewWillLeave","unsubscribe","isEmpty","undefined","trackElement","item","key","updateItem","it","find","element","navigate","state","obj","scrollToTop","content","scrollToBottom","turntostr","checkDir","dataDirectory","then","_","catch","err","save","stringlist","JSON","stringify","fileName","Date","getTime","link","document","createElement","download","blob","Blob","type","href","window","URL","createObjectURL","click","load","parse","args","selector","template","dispFile","contents","getElementById","innerHTML","clickElem","elem","eventMouse","createEvent","initMouseEvent","dispatchEvent","openFile","func","readFile","target","files","reader","FileReader","onload","result","fileInput","body","removeChild","readAsText","style","display","onchange","appendChild","c"],"sourceRoot":"","sources":["/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/src/app/home/home.page.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { ActivatedRoute, Router, RouterEvent, NavigationEnd } from '@angular/router';\nimport { StorageItem } from '../shared/storage-item';\nimport { Platform, IonContent } from '@ionic/angular';\nimport { Filesystem, Directory, Encoding } from '@capacitor/filesystem';\nimport { File } from '@awesome-cordova-plugins/file/ngx';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  @ViewChild(IonContent) private content: IonContent;\n  list: StorageItem[];\n  stringlist: string;\n  subscription: any;\n  constructor(private storage: Storage, private router: Router,\n    private platform: Platform,\n    private file: File) { }\n  ngOnInit(): void {\n\n\n\n    this.router.events.subscribe(async (e: any) => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this.list = await this.storage.get('notes') as StorageItem[];\n        console.log(this.list);\n      }\n    });\n  }\n\n\n  ionViewDidEnter(){\n    this.subscription = this.platform.backButton.subscribe(()=>{\n        navigator['app'].exitApp();\n    });\n}\n\nionViewWillLeave(){\n    this.subscription.unsubscribe();\n}\n\n  isEmpty() {\n    return this.list === undefined || this.list === null;\n  }\n\n  trackElement(item) {\n    return item.key;\n  }\n\n  async updateItem(item) {\n    let it = this.list.find((element) => {\n      return element === item;\n    });\n    this.router.navigate(['/edit-note'], {state: {obj: item}});\n    \n  }\n\n  scrollToTop() {\n    this.content.scrollToTop(500);\n  }\n\n  scrollToBottom() {\n    this.content.scrollToBottom(500);\n  }\n\n  turntostr() {\n    this.file.checkDir(this.file.dataDirectory, 'mydir').then(_ => console.log('Directory exists')).catch(err => console.log(\"Directory doesn't exist\"));  \n  }\n\n  save() {\n    console.log(this.list);\n    this.stringlist = JSON.stringify(this.list);\n    console.log(this.stringlist);\n    const fileName = new Date().getTime() + '.txt';\n    console.log(fileName);\n    var link = document.createElement('a');\n    link.download = 'data.json';\n    var blob = new Blob([this.stringlist], {type: 'text/plain'});\n    link.href = window.URL.createObjectURL(blob);\n    link.click();\n  }\n\n  load() {\n    this.list = JSON.parse(this.stringlist);\n    console.log(this.list);\n  }\n\n  function dispFile(contents) {\n  document.getElementById('contents').innerHTML=contents\n}\nfunction clickElem(elem) {\n  // Thx user1601638 on Stack Overflow (6/6/2018 - https://stackoverflow.com/questions/13405129/javascript-create-and-save-file )\n  var eventMouse = document.createEvent(\"MouseEvents\")\n  eventMouse.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n  elem.dispatchEvent(eventMouse)\n}\nfunction openFile(func) {\n  readFile = function(e) {\n    var file = e.target.files[0];\n    if (!file) {\n      return;\n    }\n    var reader = new FileReader();\n    reader.onload = function(e) {\n      var contents = e.target.result;\n      fileInput.func(contents)\n      document.body.removeChild(fileInput)\n    }\n    reader.readAsText(file)\n  }\n  fileInput = document.createElement(\"input\")\n  fileInput.type='file'\n  fileInput.style.display='none'\n  fileInput.onchange=readFile\n  fileInput.func=func\n  document.body.appendChild(fileInput)\n  c\n \n\n}\n"]},"metadata":{},"sourceType":"module"}