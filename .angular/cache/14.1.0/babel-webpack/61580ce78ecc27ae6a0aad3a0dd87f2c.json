{"ast":null,"code":"import _asyncToGenerator from \"/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./add-note.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./add-note.page.scss?ngResource\";\nimport { Component, ElementRef, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { IonTextarea, AlertController } from '@ionic/angular';\nlet AddNotePage = class AddNotePage {\n  constructor(storage, router, alertController, activatedRoute) {\n    this.storage = storage;\n    this.router = router;\n    this.alertController = alertController;\n    this.activatedRoute = activatedRoute;\n    this.arr = [];\n    this.headerLabel = 'Add Note';\n  }\n\n  ngAfterViewInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.textArea.setFocus();\n\n      if (_this.state.obj) {\n        _this.textInput.nativeElement.value = _this.state.obj.value;\n        _this.textInput2.nativeElement.value = _this.state.obj.title;\n        _this.textInput.nativeElement.style.backgroundColor = _this.state.obj.color;\n      }\n    })();\n  }\n\n  ngOnInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.activatedRoute.paramMap.subscribe(e => {\n        _this2.state = window.history.state;\n\n        if (_this2.state.obj) {\n          _this2.headerLabel = 'Edit Note';\n          _this2.enableDelete = true;\n        }\n      });\n    })();\n  }\n\n  showKeyboard() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.textArea.setFocus();\n    })();\n  }\n\n  showKeyboard2() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this4.textArea2.setFocus();\n    })();\n  }\n\n  clearInput() {\n    this.textInput.nativeElement.value = '';\n    this.textInput2.nativeElement.value = '';\n  }\n\n  saveNote() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const text = _this5.textInput.nativeElement.value;\n      const text2 = _this5.textInput2.nativeElement.value;\n\n      if (text.trim().length > 0) {\n        let id;\n        _this5.arr = yield _this5.storage.get('notes');\n\n        if (_this5.state.obj) {\n          id = _this5.state.obj.key;\n          yield _this5.updateNote(id, text, text2, _this5.arr);\n        } else {\n          id = uuidv4();\n          const time = Date.now();\n          const color = _this5.textInput.nativeElement.style.backgroundColor;\n          const item = {\n            key: id,\n            value: text,\n            title: text2,\n            lastUpdated: time,\n            color: color\n          };\n\n          if (!_this5.arr) {\n            _this5.arr = [];\n          }\n\n          _this5.arr.push(item);\n\n          yield _this5.storage.set('notes', _this5.arr);\n\n          _this5.router.navigate(['/tabs/home']);\n        }\n      } else {\n        const alert = yield _this5.alertController.create({\n          header: 'Error',\n          message: 'Please enter some text.',\n          buttons: [{\n            role: 'cancel',\n            text: 'Ok'\n          }]\n        });\n        alert.present();\n        _this5.textInput.nativeElement.value = '';\n        _this5.textInput2.nativeElement.value = '';\n      }\n    })();\n  }\n\n  updateNote(id, text, text2, arr) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const itemToUpdate = arr.find(e => e.key === id);\n      itemToUpdate.value = text;\n      itemToUpdate.title = text2;\n      itemToUpdate.lastUpdated = Date.now();\n      itemToUpdate.color = _this6.textInput.nativeElement.style.backgroundColor;\n      yield _this6.storage.set('notes', _this6.arr);\n\n      _this6.router.navigate(['/tabs/home']);\n    })();\n  }\n\n  deleteNote() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      _this7.arr = yield _this7.storage.get('notes');\n      const alert = yield _this7.alertController.create({\n        header: 'Confirm',\n        message: 'Are you sure, you want to delete the note?',\n        buttons: [{\n          text: 'Ok',\n          handler: function () {\n            var _ref = _asyncToGenerator(function* () {\n              const itemToDeleteIndex = _this7.arr.findIndex(e => e.value === _this7.textInput.nativeElement.value);\n\n              console.log(_this7.arr);\n\n              _this7.arr.splice(itemToDeleteIndex, 1);\n\n              console.log(_this7.arr);\n              yield _this7.storage.set('notes', _this7.arr);\n\n              _this7.router.navigate(['/tabs/home']);\n            });\n\n            return function handler() {\n              return _ref.apply(this, arguments);\n            };\n          }()\n        }, {\n          text: 'Cancel',\n          role: 'cancel'\n        }]\n      });\n      alert.present();\n    })();\n  }\n\n  setColor(color) {\n    this.textInput.nativeElement.style.backgroundColor = color;\n  }\n\n};\n\nAddNotePage.ctorParameters = () => [{\n  type: Storage\n}, {\n  type: Router\n}, {\n  type: AlertController\n}, {\n  type: ActivatedRoute\n}];\n\nAddNotePage.propDecorators = {\n  textInput: [{\n    type: ViewChild,\n    args: ['textInput', {\n      read: ElementRef\n    }]\n  }],\n  textArea: [{\n    type: ViewChild,\n    args: ['textInput', {\n      read: IonTextarea\n    }]\n  }],\n  textInput2: [{\n    type: ViewChild,\n    args: ['textInput2', {\n      read: ElementRef\n    }]\n  }],\n  textArea2: [{\n    type: ViewChild,\n    args: ['textInput2', {\n      read: IonTextarea\n    }]\n  }]\n};\nAddNotePage = __decorate([Component({\n  selector: 'app-add-note',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], AddNotePage);\nexport { AddNotePage };","map":{"version":3,"mappings":";;;;AAAA,SAASA,SAAT,EAAoBC,UAApB,EAAwCC,SAAxC,QAAwE,eAAxE;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,MAAT,EAAkCC,cAAlC,QAAwD,iBAAxD;AAEA,SAASC,WAAT,EAAsBC,eAAtB,QAA6C,gBAA7C;IAOaC,WAAW,SAAXA,WAAW;EAUtBC,YAAoBC,OAApB,EAA8CC,MAA9C,EACUC,eADV,EAEUC,cAFV,EAEwC;IAFpB;IAA0B;IACpC;IACA;IANV,WAAqB,EAArB;IACA,mBAAc,UAAd;EAK6C;;EACvCC,eAAe;IAAA;;IAAA;MACnB,MAAM,KAAI,CAACC,QAAL,CAAcC,QAAd,EAAN;;MACA,IAAI,KAAI,CAACC,KAAL,CAAWC,GAAf,EAAoB;QAClB,KAAI,CAACC,SAAL,CAAeC,aAAf,CAA6BC,KAA7B,GAAqC,KAAI,CAACJ,KAAL,CAAWC,GAAX,CAAeG,KAApD;QACA,KAAI,CAACC,UAAL,CAAgBF,aAAhB,CAA8BC,KAA9B,GAAsC,KAAI,CAACJ,KAAL,CAAWC,GAAX,CAAeK,KAArD;QACA,KAAI,CAACJ,SAAL,CAAeC,aAAf,CAA6BI,KAA7B,CAAmCC,eAAnC,GAAqD,KAAI,CAACR,KAAL,CAAWC,GAAX,CAAeQ,KAApE;MACD;IANkB;EAOpB;;EAEKC,QAAQ;IAAA;;IAAA;MACZ,MAAI,CAACd,cAAL,CAAoBe,QAApB,CACCC,SADD,CACYC,CAAD,IAAM;QACf,MAAI,CAACb,KAAL,GAAac,MAAM,CAACC,OAAP,CAAef,KAA5B;;QACA,IAAI,MAAI,CAACA,KAAL,CAAWC,GAAf,EAAoB;UAClB,MAAI,CAACe,WAAL,GAAmB,WAAnB;UACA,MAAI,CAACC,YAAL,GAAoB,IAApB;QACD;MACF,CAPD;IADY;EASb;;EAEKC,YAAY;IAAA;;IAAA;MAChB,MAAM,MAAI,CAACpB,QAAL,CAAcC,QAAd,EAAN;IADgB;EAEjB;;EAEKoB,aAAa;IAAA;;IAAA;MACjB,MAAM,MAAI,CAACC,SAAL,CAAerB,QAAf,EAAN;IADiB;EAElB;;EAEDsB,UAAU;IACR,KAAKnB,SAAL,CAAeC,aAAf,CAA6BC,KAA7B,GAAqC,EAArC;IACA,KAAKC,UAAL,CAAgBF,aAAhB,CAA8BC,KAA9B,GAAsC,EAAtC;EACD;;EAEKkB,QAAQ;IAAA;;IAAA;MACZ,MAAMC,IAAI,GAAG,MAAI,CAACrB,SAAL,CAAeC,aAAf,CAA6BC,KAA1C;MACA,MAAMoB,KAAK,GAAG,MAAI,CAACnB,UAAL,CAAgBF,aAAhB,CAA8BC,KAA5C;;MAEA,IAAImB,IAAI,CAACE,IAAL,GAAYC,MAAZ,GAAqB,CAAzB,EAA4B;QAC1B,IAAIC,EAAJ;QACA,MAAI,CAACC,GAAL,SAAiB,MAAI,CAACnC,OAAL,CAAaoC,GAAb,CAAiB,OAAjB,CAAjB;;QACA,IAAI,MAAI,CAAC7B,KAAL,CAAWC,GAAf,EAAoB;UAClB0B,EAAE,GAAG,MAAI,CAAC3B,KAAL,CAAWC,GAAX,CAAe6B,GAApB;UACA,MAAM,MAAI,CAACC,UAAL,CAAgBJ,EAAhB,EAAoBJ,IAApB,EAA0BC,KAA1B,EAAiC,MAAI,CAACI,GAAtC,CAAN;QACD,CAHD,MAGO;UACLD,EAAE,GAAGzC,MAAM,EAAX;UACA,MAAM8C,IAAI,GAAGC,IAAI,CAACC,GAAL,EAAb;UACA,MAAMzB,KAAK,GAAG,MAAI,CAACP,SAAL,CAAeC,aAAf,CAA6BI,KAA7B,CAAmCC,eAAjD;UACA,MAAM2B,IAAI,GAAgB;YAACL,GAAG,EAAEH,EAAN;YAAUvB,KAAK,EAAEmB,IAAjB;YAAuBjB,KAAK,EAAEkB,KAA9B;YAAqCY,WAAW,EAAEJ,IAAlD;YAAwDvB,KAAK,EAAEA;UAA/D,CAA1B;;UAEA,IAAI,CAAC,MAAI,CAACmB,GAAV,EAAe;YACb,MAAI,CAACA,GAAL,GAAW,EAAX;UACD;;UACD,MAAI,CAACA,GAAL,CAASS,IAAT,CAAcF,IAAd;;UACA,MAAM,MAAI,CAAC1C,OAAL,CAAa6C,GAAb,CAAiB,OAAjB,EAA0B,MAAI,CAACV,GAA/B,CAAN;;UACA,MAAI,CAAClC,MAAL,CAAY6C,QAAZ,CAAqB,CAAC,YAAD,CAArB;QACD;MACF,CAnBD,MAmBO;QACL,MAAMC,KAAK,SAAS,MAAI,CAAC7C,eAAL,CAAqB8C,MAArB,CAA4B;UAC9CC,MAAM,EAAE,OADsC;UAE9CC,OAAO,EAAE,yBAFqC;UAG9CC,OAAO,EAAE,CAAC;YACRC,IAAI,EAAE,QADE;YAERtB,IAAI,EAAE;UAFE,CAAD;QAHqC,CAA5B,CAApB;QAQAiB,KAAK,CAACM,OAAN;QACA,MAAI,CAAC5C,SAAL,CAAeC,aAAf,CAA6BC,KAA7B,GAAqC,EAArC;QACA,MAAI,CAACC,UAAL,CAAgBF,aAAhB,CAA8BC,KAA9B,GAAsC,EAAtC;MACD;IAnCW;EAqCb;;EACK2B,UAAU,CAACJ,EAAD,EAAUJ,IAAV,EAAwBC,KAAxB,EAAuCI,GAAvC,EAAyD;IAAA;;IAAA;MACvE,MAAMmB,YAAY,GAAGnB,GAAG,CAACoB,IAAJ,CAAUnC,CAAD,IAAOA,CAAC,CAACiB,GAAF,KAAUH,EAA1B,CAArB;MACAoB,YAAY,CAAC3C,KAAb,GAAqBmB,IAArB;MACAwB,YAAY,CAACzC,KAAb,GAAqBkB,KAArB;MACAuB,YAAY,CAACX,WAAb,GAA2BH,IAAI,CAACC,GAAL,EAA3B;MACAa,YAAY,CAACtC,KAAb,GAAqB,MAAI,CAACP,SAAL,CAAeC,aAAf,CAA6BI,KAA7B,CAAmCC,eAAxD;MACE,MAAM,MAAI,CAACf,OAAL,CAAa6C,GAAb,CAAiB,OAAjB,EAA0B,MAAI,CAACV,GAA/B,CAAN;;MACA,MAAI,CAAClC,MAAL,CAAY6C,QAAZ,CAAqB,CAAC,YAAD,CAArB;IAPqE;EAQxE;;EAEKU,UAAU;IAAA;;IAAA;MACd,MAAI,CAACrB,GAAL,SAAiB,MAAI,CAACnC,OAAL,CAAaoC,GAAb,CAAiB,OAAjB,CAAjB;MACA,MAAMW,KAAK,SAAS,MAAI,CAAC7C,eAAL,CAAqB8C,MAArB,CAA4B;QAC9CC,MAAM,EAAE,SADsC;QAE9CC,OAAO,EAAE,4CAFqC;QAG9CC,OAAO,EAAE,CAAC;UACRrB,IAAI,EAAE,IADE;UAER2B,OAAO;YAAA,6BAAE,aAAW;cAClB,MAAMC,iBAAiB,GAAG,MAAI,CAACvB,GAAL,CAASwB,SAAT,CAAoBvC,CAAD,IAAOA,CAAC,CAACT,KAAF,KAAY,MAAI,CAACF,SAAL,CAAeC,aAAf,CAA6BC,KAAnE,CAA1B;;cACAiD,OAAO,CAACC,GAAR,CAAY,MAAI,CAAC1B,GAAjB;;cACA,MAAI,CAACA,GAAL,CAAS2B,MAAT,CAAgBJ,iBAAhB,EAAmC,CAAnC;;cACAE,OAAO,CAACC,GAAR,CAAY,MAAI,CAAC1B,GAAjB;cACA,MAAM,MAAI,CAACnC,OAAL,CAAa6C,GAAb,CAAiB,OAAjB,EAA0B,MAAI,CAACV,GAA/B,CAAN;;cACA,MAAI,CAAClC,MAAL,CAAY6C,QAAZ,CAAqB,CAAC,YAAD,CAArB;YACD,CAPM;;YAAA;cAAA;YAAA;UAAA;QAFC,CAAD,EAWT;UACEhB,IAAI,EAAE,QADR;UAEEsB,IAAI,EAAE;QAFR,CAXS;MAHqC,CAA5B,CAApB;MAoBAL,KAAK,CAACM,OAAN;IAtBc;EAwBf;;EAEDU,QAAQ,CAAC/C,KAAD,EAAM;IACZ,KAAKP,SAAL,CAAeC,aAAf,CAA6BI,KAA7B,CAAmCC,eAAnC,GAAqDC,KAArD;EACD;;AA1HqB;;;QAXfzB;;QAEAG;;QAEaG;;QAFYF;;;;;UAW/BL;IAAS0E,OAAC,WAAD,EAAc;MAACC,IAAI,EAAE5E;IAAP,CAAd;;;UACTC;IAAS0E,OAAC,WAAD,EAAc;MAACC,IAAI,EAAErE;IAAP,CAAd;;;UACTN;IAAS0E,OAAC,YAAD,EAAe;MAACC,IAAI,EAAE5E;IAAP,CAAf;;;UACTC;IAAS0E,OAAC,YAAD,EAAe;MAACC,IAAI,EAAErE;IAAP,CAAf;;;AALCE,WAAW,eALvBV,SAAS,CAAC;EACT8E,QAAQ,EAAE,cADD;EAETC,8BAFS;;AAAA,CAAD,CAKc,GAAXrE,WAAW,CAAX;SAAAA","names":["Component","ElementRef","ViewChild","Storage","v4","uuidv4","Router","ActivatedRoute","IonTextarea","AlertController","AddNotePage","constructor","storage","router","alertController","activatedRoute","ngAfterViewInit","textArea","setFocus","state","obj","textInput","nativeElement","value","textInput2","title","style","backgroundColor","color","ngOnInit","paramMap","subscribe","e","window","history","headerLabel","enableDelete","showKeyboard","showKeyboard2","textArea2","clearInput","saveNote","text","text2","trim","length","id","arr","get","key","updateNote","time","Date","now","item","lastUpdated","push","set","navigate","alert","create","header","message","buttons","role","present","itemToUpdate","find","deleteNote","handler","itemToDeleteIndex","findIndex","console","log","splice","setColor","args","read","selector","template"],"sourceRoot":"","sources":["/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/src/app/add-note/add-note.page.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Router, NavigationStart, ActivatedRoute } from '@angular/router';\nimport { StorageItem } from '../shared/storage-item';\nimport { IonTextarea, AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-add-note',\n  templateUrl: './add-note.page.html',\n  styleUrls: ['./add-note.page.scss'],\n})\nexport class AddNotePage implements OnInit, AfterViewInit {\n\n  @ViewChild('textInput', {read: ElementRef}) textInput: ElementRef;\n  @ViewChild('textInput', {read: IonTextarea}) textArea: IonTextarea;\n  @ViewChild('textInput2', {read: ElementRef}) textInput2: ElementRef;\n  @ViewChild('textInput2', {read: IonTextarea}) textArea2: IonTextarea;\n  arr: StorageItem[] = [];\n  headerLabel = 'Add Note';\n  state: any;\n  enableDelete: boolean;\n  constructor(private storage: Storage, private router: Router,\n    private alertController: AlertController,\n    private activatedRoute: ActivatedRoute) { }\n  async ngAfterViewInit() {\n    await this.textArea.setFocus();\n    if (this.state.obj) {\n      this.textInput.nativeElement.value = this.state.obj.value;\n      this.textInput2.nativeElement.value = this.state.obj.title\n      this.textInput.nativeElement.style.backgroundColor = this.state.obj.color;\n    }\n  }\n\n  async ngOnInit() {\n    this.activatedRoute.paramMap\n    .subscribe((e) => {\n      this.state = window.history.state;\n      if (this.state.obj) {\n        this.headerLabel = 'Edit Note';\n        this.enableDelete = true;\n      }\n    });  \n  }\n\n  async showKeyboard() {\n    await this.textArea.setFocus();\n  }\n\n  async showKeyboard2() {\n    await this.textArea2.setFocus();\n  }\n\n  clearInput() {\n    this.textInput.nativeElement.value = '';    \n    this.textInput2.nativeElement.value = '';   \n  }\n\n  async saveNote() {\n    const text = this.textInput.nativeElement.value as string;  \n    const text2 = this.textInput2.nativeElement.value as string;\n\n    if (text.trim().length > 0) {\n      let id;\n      this.arr = await this.storage.get('notes') as StorageItem[];\n      if (this.state.obj) {\n        id = this.state.obj.key;\n        await this.updateNote(id, text, text2, this.arr);\n      } else {\n        id = uuidv4();\n        const time = Date.now();\n        const color = this.textInput.nativeElement.style.backgroundColor;\n        const item = <StorageItem>{key: id, value: text, title: text2, lastUpdated: time, color: color};\n        \n        if (!this.arr) {\n          this.arr = [];\n        }\n        this.arr.push(item);\n        await this.storage.set('notes', this.arr);\n        this.router.navigate(['/tabs/home']);\n      }\n    } else {\n      const alert = await this.alertController.create({\n        header: 'Error',\n        message: 'Please enter some text.',\n        buttons: [{\n          role: 'cancel',\n          text: 'Ok'\n        }]\n      })\n      alert.present();\n      this.textInput.nativeElement.value = '';\n      this.textInput2.nativeElement.value = '';\n    }\n\n  }\n  async updateNote(id: any, text: string, text2: string, arr: StorageItem[]) {\n    const itemToUpdate = arr.find((e) => e.key === id);\n    itemToUpdate.value = text;\n    itemToUpdate.title = text2;\n    itemToUpdate.lastUpdated = Date.now();\n    itemToUpdate.color = this.textInput.nativeElement.style.backgroundColor;\n      await this.storage.set('notes', this.arr);\n      this.router.navigate(['/tabs/home']);\n  }\n\n  async deleteNote() {\n    this.arr = await this.storage.get('notes') as StorageItem[];\n    const alert = await this.alertController.create({\n      header: 'Confirm',\n      message: 'Are you sure, you want to delete the note?',\n      buttons: [{\n        text: 'Ok',\n        handler: async () => {\n          const itemToDeleteIndex = this.arr.findIndex((e) => e.value === this.textInput.nativeElement.value);\n          console.log(this.arr);\n          this.arr.splice(itemToDeleteIndex, 1);\n          console.log(this.arr);  \n          await this.storage.set('notes', this.arr);\n          this.router.navigate(['/tabs/home']);\n        }\n      },\n      {\n        text: 'Cancel',\n        role: 'cancel'\n      }\n    ]\n    })\n    alert.present();\n\n  }\n\n  setColor(color) {\n    this.textInput.nativeElement.style.backgroundColor = color;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}