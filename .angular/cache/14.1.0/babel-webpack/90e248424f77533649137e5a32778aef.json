{"ast":null,"code":"import _asyncToGenerator from \"/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./home.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./home.page.scss?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { Platform, IonContent } from '@ionic/angular';\nimport { File } from '@awesome-cordova-plugins/file/ngx';\nlet HomePage = class HomePage {\n  constructor(storage, router, platform, file) {\n    this.storage = storage;\n    this.router = router;\n    this.platform = platform;\n    this.file = file;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    this.router.events.subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        // If it is a NavigationEnd event re-initalise the component\n        if (e instanceof NavigationEnd) {\n          _this.list = yield _this.storage.get('notes');\n          console.log(_this.list);\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  ionViewDidEnter() {\n    this.subscription = this.platform.backButton.subscribe(() => {\n      navigator['app'].exitApp();\n    });\n  }\n\n  ionViewWillLeave() {\n    this.subscription.unsubscribe();\n  }\n\n  isEmpty() {\n    return this.list === undefined || this.list === null;\n  }\n\n  trackElement(item) {\n    return item.key;\n  }\n\n  updateItem(item) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let it = _this2.list.find(element => {\n        return element === item;\n      });\n\n      _this2.router.navigate(['/edit-note'], {\n        state: {\n          obj: item\n        }\n      });\n    })();\n  }\n\n  scrollToTop() {\n    this.content.scrollToTop(500);\n  }\n\n  scrollToBottom() {\n    this.content.scrollToBottom(500);\n  }\n\n  turntostr() {}\n\n  save() {\n    // console.log(this.list);\n    this.stringlist = JSON.stringify(this.list); // console.log(this.stringlist);\n\n    const fileName = this.list[0].title + '_' + new Date().getDay() + '_' + new Date().getMonth() + ''; // console.log(fileName);\n\n    var link = document.createElement('a');\n    link.download = fileName;\n    var blob = new Blob([this.stringlist], {\n      type: 'application/json'\n    });\n    link.href = window.URL.createObjectURL(blob);\n    link.click();\n  }\n\n  loadImageFromDevice(event) {\n    const inputfile = event.target.files[0];\n    const reader = new FileReader();\n    reader.readAsText(inputfile);\n    this.storage.remove('notes');\n    setTimeout(() => {\n      this.sm = reader.result;\n      this.list = JSON.parse(this.sm);\n      console.log(this.list);\n      this.storage.set('notes', this.list);\n    }, 1500);\n  }\n\n};\n\nHomePage.ctorParameters = () => [{\n  type: Storage\n}, {\n  type: Router\n}, {\n  type: Platform\n}, {\n  type: File\n}];\n\nHomePage.propDecorators = {\n  content: [{\n    type: ViewChild,\n    args: [IonContent]\n  }]\n};\nHomePage = __decorate([Component({\n  selector: 'app-home',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HomePage);\nexport { HomePage };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","Storage","Router","NavigationEnd","Platform","IonContent","File","HomePage","constructor","storage","router","platform","file","ngOnInit","events","subscribe","e","list","get","console","log","ionViewDidEnter","subscription","backButton","navigator","exitApp","ionViewWillLeave","unsubscribe","isEmpty","undefined","trackElement","item","key","updateItem","it","find","element","navigate","state","obj","scrollToTop","content","scrollToBottom","turntostr","save","stringlist","JSON","stringify","fileName","title","Date","getDay","getMonth","link","document","createElement","download","blob","Blob","type","href","window","URL","createObjectURL","click","loadImageFromDevice","event","inputfile","target","files","reader","FileReader","readAsText","remove","setTimeout","sm","result","parse","set","args","selector","template"],"sourceRoot":"","sources":["/Users/awaadchaudhry/Desktop/Coding/Projects/Liftbuddy/src/app/home/home.page.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { ActivatedRoute, Router, RouterEvent, NavigationEnd } from '@angular/router';\nimport { StorageItem } from '../shared/storage-item';\nimport { Platform, IonContent } from '@ionic/angular';\nimport { Filesystem, Directory, Encoding } from '@capacitor/filesystem';\nimport { File } from '@awesome-cordova-plugins/file/ngx';\ndeclare var require: any\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  @ViewChild(IonContent) private content: IonContent;\n  list: StorageItem[];\n  stringlist: string;\n  subscription: any;\n  inputfile: any;\n  sm: string;\n  constructor(private storage: Storage, private router: Router,\n    private platform: Platform,\n    private file: File) { }\n  ngOnInit(): void {\n\n\n\n    this.router.events.subscribe(async (e: any) => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this.list = await this.storage.get('notes') as StorageItem[];\n        console.log(this.list);\n      }\n    });\n  }\n\n\n  ionViewDidEnter(){\n    this.subscription = this.platform.backButton.subscribe(()=>{\n        navigator['app'].exitApp();\n    });\n}\n\nionViewWillLeave(){\n    this.subscription.unsubscribe();\n}\n\n  isEmpty() {\n    return this.list === undefined || this.list === null;\n  }\n\n  trackElement(item) {\n    return item.key;\n  }\n\n  async updateItem(item) {\n    let it = this.list.find((element) => {\n      return element === item;\n    });\n    this.router.navigate(['/edit-note'], {state: {obj: item}});\n    \n  }\n\n  scrollToTop() {\n    this.content.scrollToTop(500);\n  }\n\n  scrollToBottom() {\n    this.content.scrollToBottom(500);\n  }\n\n  turntostr() {\n\n  }\n\n  save() {\n    // console.log(this.list);\n    this.stringlist = JSON.stringify(this.list);\n    // console.log(this.stringlist);\n    const fileName = this.list[0].title + '_' + new Date().getDay() + '_' + new Date().getMonth() + '';\n    // console.log(fileName);\n    var link = document.createElement('a');\n    link.download = fileName;\n    var blob = new Blob([this.stringlist], {type: 'application/json'});\n    link.href = window.URL.createObjectURL(blob);\n    link.click();\n  }\n\n  loadImageFromDevice(event) {\n    const inputfile = event.target.files[0];\n    const reader = new FileReader();\n    reader.readAsText(inputfile);\n    this.storage.remove('notes');\n    setTimeout(() => {  \n          this.sm = reader.result as string; \n          this.list = JSON.parse(this.sm);\n          console.log(this.list);\n          this.storage.set('notes', this.list);\n        }, 1500);  \n\n  };\n\n}\n"]},"metadata":{},"sourceType":"module"}